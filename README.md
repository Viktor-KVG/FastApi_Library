
#Название проекта: FastApi_Library


Данный проект представляет собой веб-приложение для управления библиотекой, которое позволяет пользователям взаимодействовать с базой данных книг, авторов и пользователей. Приложение построено на основе фреймворка FastAPI

#Приложение включает следующие основные функции:

   1. Авторизация и аутентификация: Регистрация и вход пользователей с использованием JWT-токенов.

   2. Управление книгами: CRUD операции (создание, чтение, обновление, удаление) для книг, включая управление их атрибутами (название, автор, жанр и т.д.).

   3. Управление авторами: CRUD операции для авторов, включая добавление, обновление и удаление информации об авторах.

   4. Управление пользователями: Возможность регистрации и управления данными пользователей (читателей).

   5. Выдача и возврат книг: Процессы выдачи книг читателям с фиксированием сроков возврата и обновлением статуса доступности книг.

   6. Пагинация и фильтрация: Удобный просмотр списков книг и авторов с возможностью фильтрации по различным критериям.

   7. Обработка ошибок и логирование: Эффективная обработка ошибок и логирование ключевых событий для мониторинга работы системы.

   8. Тестирование: Юнит-тесты для проверки функциональности API.


# Структура проекта
- `core` - бизнес-логика проекта отвечающая за поведение.
  - `core_author.py` - реализует функциональность операций CRUD и поиск авторов.
  - `core_book.py` - реализует функциональность операций CRUD и поиск книг.
  - `core_storage.py` - реализует функциональность операций выдачи, возврата и поиск задолжностей по книгам.
  - `core_user.py` - реализует функциональность операций CRUD и поиск читателей и администраторов.
- `documentation/` - документация проекта.
- `migrations/` - файл с миграциями проекта.
- `src/` - основная папка с исходным кодом проекта.
  - `auth/` - директория с аутентификацией через jwt токен
    - `auth_jwt.py` - файл настроек прав доступа сервиса.
  - `routers/` - директория с API-эндпоинтами
    - `general_author.py` - определяет маршруты для работы с авторами, включая CRUD-операции.
    - `general_book.py` - определяет маршруты для работы с книгами, включая CRUD-операции.
    - `general_storage.py` - определяет маршруты для управления хранилищем данных по задолжностям и выдачам книг.
    - `general_user.py` - определяет маршруты для работы с читателями и администраторами, включая CRUD-операции.
  - `database.py` - файл настройки подключения к БД.    
  - `main.py` - точка входа в приложение, где создаётся объект FastAPI и подключаются роутеры.
  - `models.py` - orm модели таблиц БД.
  - `schemas.py` - pydantic схемы для указания формата запросов/ответов api.  
  - `settings.py` - файл подключения настроек сервиса.
- `tests/` -  директория, содержащая тесты для проверки функциональности приложения
  - `conftest.py` - определяет общие фикстуры и настройки для тестирования.
  - `test_general_author.py` - тесты для проверки функциональности функций поиска авторов.
  - `test_general_book.py` - тесты для проверки функциональности функций поиска книг.
  - `test_general_user.py` - тесты для проверки функциональности, связанной с пользователями, включая аутентификацию и управление данными.  
- `README.MD` - описание проекта.


## Сборка и запуск проекта

```bash
docker compose build 
docker compose up -d 
```
    
## Накатывание миграций
Если контейнер с БД развёрнут в первый раз (или после удаления), то необходимо накатить миграции на БД:

```bash
alembic upgrade head
alembic revision --autogenerate
```
    
## Диагностика проблем 
Для отображения потоков вывода и потока ошибок внутри контейнера выполнить:

```bash
docker-compose logs -f    
```    

### swagger

   http://127.0.0.1:8000/docs


    



